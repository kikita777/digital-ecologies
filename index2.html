<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photon connect2</title>
</head>
<body>
    <script src = "https://cdn.jsdelivr.net/npm/p5@1.0.0/lib/p5.js"></script>
    <script>
        let url = "https://api.particle.io/v1/devices/320026000447393035313138/pot_value?access_token=b89ef388a13811202793d517754ecb152213996d";
        let data = " ";
        let currentTime, prevTime;
        let value;
        let url2 = "https://api.particle.io/v1/devices/1a002f001847393035313138/pot_value?access_token=84b28f2cab6a81beaed6206fdaf5c089fac7bc32";
        let data2 = " ";
        let value2;


        function setup(){
            createCanvas(400,400);
        }

        function draw(){
            background(255);
        //1
            currentTime = millis() % 1000;
            if(currentTime < prevTime){
                data = loadJSON(url, processData);
                data2 = loadJSON(url2, processData2);
            }
            fill(255, 0, 0);
            circle(100 , 100, value);

            fill(255, 110, 0);
            rect(200 , 200, value2, value2/2);
            prevTime = currentTime;
        }

        function processData(data){
                console.log(data.result);
                value = map(parseInt(data.result), 0, 4096, 0, width);
                console.log(value); 
        }
        function processData2(data2){
            console.log(data2.result);
                value2 = map(parseInt(data2.result), 0, 4096, 0, width);
                console.log(value2);
        }

    </script>
</body>
</html>